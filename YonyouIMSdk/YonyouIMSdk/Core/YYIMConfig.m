//
//  YYIMConfig.m
//  YonyouIM
//
//  Created by litfb on 14/12/25.
//  Copyright (c) 2014å¹´ yonyou. All rights reserved.
//

#import "YYIMConfig.h"

#import "YYIMDefs.h"
#import "YYIMStringUtility.h"
#import "YYIMJUMPHelper.h"
#import "YYIMLogger.h"

#pragma mark AppKey & EtpKey

// app & etp key
#define YM_APP_KEY                          @"YM_APP_KEY"
#define YM_ETP_KEY                          @"YM_ETP_KEY"

#pragma mark -
#pragma mark Server & Port

// im server
#define YM_IM_SERVER                        @"YM_IM_SERVER"
#define YM_IM_SERVER_NAME                   @"YM_IM_SERVER_NAME"
#define YM_IM_SERVER_PORT                   @"YM_IM_SERVER_PORT"
#define YM_IM_SERVER_SSLPORT                @"YM_IM_SERVER_SSLPORT"
#define YM_IM_SERVER_ENABLESSL              @"YM_IM_SERVER_ENABLESSL"
// rest server
#define YM_IM_REST_SERVER                   @"YM_IM_REST_SERVER"
#define YM_IM_REST_SERVER_HTTPS             @"YM_IM_REST_SERVER_HTTPS"
#define YM_IM_REST_RESOURCE_SERVER_HTTPS    @"YM_IM_REST_RESOURCE_SERVER_HTTPS"

#pragma mark -
#pragma mark Upload & Download

// upload & download server
#define YM_RESOURCE_UPLOAD_SERVER           @"YM_RESOURCE_UPLOAD_SERVER"
#define YM_RESOURCE_DOWNLOAD_SERVER         @"YM_RESOURCE_DOWNLOAD_SERVER"

#pragma mark -
#pragma mark Current State

// user
#define YM_LAST_ACCOUNT                     @"YM_LAST_ACCOUNT"
#define YM_LAST_JID                         @"YM_LAST_JID"
// anonymous
#define YM_ANONYMOUS                        @"YM_ANONYMOUS"
// device token
#define YM_DEVICE_TOKEN                     @"YM_DEVICE_TOKEN"
// token
#define YM_TOKEN                            @"YM_TOKEN"
#define YM_TOKEN_EXPIRATION                 @"YM_TOKEN_EXPIRATION"
// pan admin
#define YM_PAN_ADMIN                        @"YM_PAN_ADMIN"

#pragma mark -
#pragma mark Settings

// auto login
#define YM_IS_AUTO_LOGIN                    @"YM_IS_AUTO_LOGIN"
// apns
#define YM_APNS_CER_NAME                    @"YM_APNS_CER_NAME"
// is auto accept roster invete
#define YM_AUTO_ACCEPT_ROSTER_INVITE        @"YM_AUTO_ACCEPT_ROSTER_INVITE"
// settings
#define YM_SETTINGS_INIT                    @"YM_SETTINGS_INIT"
#define YM_SETTINGS_NEWMSG_REMIND           @"YM_SETTINGS_NEWMSG_REMIND"
#define YM_SETTINGS_PLAY_SOUND              @"YM_SETTINGS_PLAY_SOUND"
#define YM_SETTINGS_PLAY_VIBRATE            @"YM_SETTINGS_PLAY_VIBRATE"
#define YM_SETTINGS_SHOW_DETAIL             @"YM_SETTINGS_SHOW_DETAIL"
// message version number
#define YM_MESSAGE_VERSION_NUMBER           @"YM_MESSAGE_VERSION_NUMBER"
// chatgroup version number
#define YM_CHATGROUP_VERSION_NUMBER         @"YM_CHATGROUP_VERSION_NUMBER"
// vcard setting
#define YM_VCARD_SETTING                    @"YM_VCARD_SETTING"
// is roster collect
#define YM_IS_ROSTER_COLLECT                @"YM_IS_ROSTER_COLLECT"
// is chatgroup version
#define YM_IS_CHATGROUP_VERSION             @"YM_IS_CHATGROUP_VERSION"
// is force message sync
#define YM_IS_FORCE_MESSAGE_SYNC            @"YM_IS_FORCE_MESSAGE_SYNC"

#pragma mark -
#pragma mark Tele Conference

// dudu params
#define YM_DUDU_ACCOUNTIDENTIFY             @"YM_DUDU_ACCOUNTIDENTIFY"
#define YM_DUDU_APPKEYTEMP                  @"YM_DUDU_APPKEYTEMP"

#pragma mark -
#pragma mark Default Server & Port

/** default im server */
#define DEFAULT_IM_SERVER                   @"stellar.yyuap.com"
/** default im server name */
#define DEFAULT_IM_SERVER_NAME              @"im.yyuap.com"
/** default im server port */
#define DEFAULT_IM_SERVER_PORT              5227
#define DEFAULT_IM_SERVER_SSLPORT           5223

/** default im rest server */
#define DEFAULT_IM_REST_SERVER              @"im.yyuap.com"
#define DEFAULT_IM_REST_SERVER_HTTPS        YES
#define DEFAULT_IM_REST_RESOURCE_SERVER_HTTPS        NO

/** default resource server */
#define DEFAULT_RESOURCE_UPLOAD_SERVER      @"up.im.yyuap.com"
#define DEFAULT_RESOURCE_DOWNLOAD_SERVER    @"down.im.yyuap.com"



#pragma mark -
#pragma mark Default Rest Servlet -

#define DEFAULT_RESOURCE_SERVLET                        @"{scheme}://{restServer}/sysadmin/rest/resource/{etpId}/{appId}"

#pragma mark DeviceToken

/** default device token service */
#define DEFAULT_DEVICETOKEN_SERVLET                     @"{scheme}://{restServer}/sysadmin/rest/ios/token/"

#pragma mark Password

/** default password service */
#define DEFAULT_PASSWORD_SERVLET                        @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{username}/password"

#pragma mark DemoToken

/** default demo token service */
#define DEFAULT_DEMO_TOKEN_SERVLET                      @"{scheme}://{restServer}/sysadmin/rest/demo/token"


#pragma mark Version

/** default version service */
#define DEFAULT_VERSION_SERVLET                         @"{scheme}://{restServer}/sysadmin/rest/version/{etpId}/{appId}/{username}"
/** default muc version service */
#define DEFAULT_MUC_VERSION_SERVLET                     @"{scheme}://{restServer}/sysadmin/rest/user/version/room"

#pragma mark Tele Conference

/** default dudu create conference */
#define DEFAULT_DUDU_CREATE_CONFERENCE                  @"http://dudu.yonyoutelecom.cn/httpIntf/createConference.do"
/** default tele conferene service */
#define DEFAULT_TELECONFERENCE_SERVLET                  @"{scheme}://{restServer}/sysadmin/rest/user/voip/make"

#pragma mark MUC QRCode

/** default muc qrcode service */
#define DEFAULT_MUCQRCODE_SERVLET                       @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/mucqrcode"
/** default muc qrcode info service */
#define DEFAULT_MUCQRCODE_INFO_SERVLET                  @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/mucqrcode/info"

#pragma mark Net Meeting

/** default netmeeting key service */
#define DEFAULT_NETMEETING_KEY_SERVLET                  @"{scheme}://{restServer}/sysadmin/rest/user/phosvraccount/{etpId}/{appId}/{userId}/vendorkey"
/** default netmeeting info service */
#define DEFAULT_NETMEETING_INFO_SERVLET                 @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/netconference/{userId}"
/** default netmeeting detail service */
#define DEFAULT_NETMEETING_DETAIL_SERVLET               @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/netconference/{userId}/{channelId}/record/info"
/** default netmeeting reservation service */
#define DEFAULT_NETMEETING_RESERVATION_SERVLET          @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/netconference/reservation"
/** default netmeeting remove service */
#define DEFAULT_NETMEETING_REMOVE_SERVLET               @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/netconference/{userId}/{channelId}/record"
/** default netmeeting cancel service */
#define DEFAULT_NETMEETING_CANCEL_RESERVATION_SERVLET   @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/netconference/reservation/{channelId}"
/** default netmeeting reservation invite service */
#define DEFAULT_NETMEETING_RESERVATION_INVITE_SERVLET   @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/netconference/reservation/members"
/** default netmeeting reservation kick service */
#define DEFAULT_NETMEETING_RESERVATION_KICK_SERVLET     @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/netconference/reservation/{channelId}/members"

#pragma mark Message Revoke

/** default group message revoke service */
#define DEFAULT_GROUP_MESSAGE_REVOKE_SERVLET            @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/revokeservice/groupmessage/{packetId}"
/** default personal message revoke service */
#define DEFAULT_PERSONAL_MESSAGE_REVOKE_SERVLET         @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/revokeservice/personalmessage/{packetId}"

#pragma mark Group Member

/** chatgroup  memberlist serv */
#define DEFAULT_CHATGROUP_MEMBER_LIST_SERVLET           @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/rooms/{roomId}/{userId}/version/members"

#pragma mark Message File

/** default mssage file search chat list serv */
#define DEFAULT_MESSAGE_FILE_CHAT_LIST_SERVLET          @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/shareattachment/persional/attachment/{userId}/{chatId}"
/** default mssage file search chat search serv */
#define DEFAULT_MESSAGE_FILE_CHAT_SEARCH_SERVLET        @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/shareattachment/persional/attachment/searching/{userId}/{chatId}"
/** default mssage file search chatgroup list serv */
#define DEFAULT_MESSAGE_FILE_CHATGROUP_LIST_SERVLET     @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/shareattachment/room/attachment/{roomId}/{userId}"
/** default mssage file search chatgroup search serv */
#define DEFAULT_MESSAGE_FILE_CHATGROUP_SEARCH_SERVLET   @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/shareattachment/room/attachment/searching/{roomId}/{userId}"

#pragma mark PubAccount Menu

/** pubaccount menu serv */
#define DEFAULT_PUBACCOUNT_MENU_SERVLET                 @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{pubId}/{userId}/pubaccountmenu/menu"
/** pubaccount menu command serv */
#define DEFAULT_PUBACCOUNT_MENU_COMMAND_SERVLET         @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{pubId}/{userId}/pubaccountmenu/event"

#pragma mark UserTag & RosterTag

/** user tag add serv */
#define DEFAULT_USER_TAG_ADD_SERVLET                    @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{userId}/vcard/tag"
/** user tag delete serv */
#define DEFAULT_USER_TAG_DELETE_SERVLET                 @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{userId}/vcard/tag"
/** roster tag add serv */
#define DEFAULT_ROSTER_TAG_ADD_SERVLET                  @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{userId}/{rosterId}/roster/tag"
/** roster tag delete serv */
#define DEFAULT_ROSTER_TAG_DELETE_SERVLET               @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{userId}/{rosterId}/roster/tag"

#pragma mark UserProfile

#define DEFAULT_USER_PROFILE_SERVLET                    @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{userId}/profile"
#define DEFAULT_USER_PROFILE_MUTE_SERVLET                    @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{userId}/profile/mute"
#define DEFAULT_USER_PROFILE_STICK_SERVLET                    @"{scheme}://{restServer}/sysadmin/rest/user/{etpId}/{appId}/{userId}/profile/stick"

@implementation YYIMConfig

+ (instancetype)sharedInstance {
    static dispatch_once_t pred = 0;
    __strong static id _sharedObject = nil;
    dispatch_once(&pred, ^{
        _sharedObject = [[self alloc] init];
    });
    return _sharedObject;
}

- (id)init {
    self = [super init];
    if (self) {
        [self setIMServer:DEFAULT_IM_SERVER];
        [self setIMServerName:DEFAULT_IM_SERVER_NAME];
        [self setIMServerPort:DEFAULT_IM_SERVER_PORT];
        [self setIMServerSSLPort:DEFAULT_IM_SERVER_SSLPORT];
        [self setIMServerEnableSSL:YES];
        
        [self setIMRestServer:DEFAULT_IM_REST_SERVER];
        [self setIMRestServerHTTPS:DEFAULT_IM_REST_SERVER_HTTPS];
        [self setIMRestResourceServerHTTPS:DEFAULT_IM_REST_RESOURCE_SERVER_HTTPS];
        
        [self setResourceUploadServer:DEFAULT_RESOURCE_UPLOAD_SERVER];
        [self setResourceDownloadServer:DEFAULT_RESOURCE_DOWNLOAD_SERVER];
        
        [self setChatGroupVersion:YES];
    }
    return self;
}


#pragma mark AppKey & EtpKey

/**
 *  åºç¨ID
 *
 *  @return åºç¨ID
 */
- (NSString *)getAppKey {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_APP_KEY];
}

/**
 *  è®¾ç½®åºç¨ID
 *
 *  @param appKey åºç¨ID
 */
- (void)setAppKey:(NSString *)appKey {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:appKey forKey:YM_APP_KEY];
    [userDefaults synchronize];
}

/**
 *  ä¼ä¸ID
 *
 *  @return ä¼ä¸ID
 */
- (NSString *)getEtpKey {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_ETP_KEY];
}

/**
 *  è®¾ç½®ä¼ä¸ID
 *
 *  @param etpKey ä¼ä¸ID
 */
- (void)setEtpKey:(NSString *)etpKey {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:etpKey forKey:YM_ETP_KEY];
    [userDefaults synchronize];
}

#pragma mark -
#pragma mark Server & Port

/**
 *  IM Server
 *
 *  @return IM Server
 */
- (NSString *)getIMServer {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_IM_SERVER];
}

/**
 *  è®¾ç½®IM Server
 *
 *  @param imServer IM Server
 */
- (void)setIMServer:(NSString *)imServer {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:imServer forKey:YM_IM_SERVER];
    [userDefaults synchronize];
}

/**
 *  IM ServerName
 *
 *  @return IM ServerName
 */
- (NSString *)getIMServerName {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_IM_SERVER_NAME];
}

/**
 *  è®¾ç½®IM ServerName
 *
 *  @param imServerName IM ServerName
 */
- (void)setIMServerName:(NSString *)imServerName {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:imServerName forKey:YM_IM_SERVER_NAME];
    [userDefaults synchronize];
}

/**
 *  ç¾¤ç»ServerName
 *
 *  @return ç¾¤ç»ServerName
 */
- (NSString *)getConferenceServerName {
    return [NSString stringWithFormat:@"conference.%@", [[YYIMConfig sharedInstance] getIMServerName]];
}

/**
 *  å¬å±å·ServerName
 *
 *  @return å¬å±å·ServerName
 */
- (NSString *)getPubAccountServerName {
    return [NSString stringWithFormat:@"pubaccount.%@", [[YYIMConfig sharedInstance] getIMServerName]];
}

/**
 *  æç´¢ServerName
 *
 *  @return æç´¢ServerName
 */
- (NSString *)getSearchServerName {
    return [NSString stringWithFormat:@"search.%@", [[YYIMConfig sharedInstance] getIMServerName]];
}

/**
 *  IM Serverç«¯å£
 *
 *  @return IM Serverç«¯å£
 */
- (NSInteger)getIMServerPort {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults integerForKey:YM_IM_SERVER_PORT];
}

/**
 *  è®¾ç½®IM Serverç«¯å£
 *
 *  @param serverPort IM Serverç«¯å£
 */
- (void)setIMServerPort:(NSInteger)serverPort {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setInteger:serverPort forKey:YM_IM_SERVER_PORT];
    [userDefaults synchronize];
}

/**
 *  IM Server SSLç«¯å£
 *
 *  @return IM Server SSLç«¯å£
 */
- (NSInteger)getIMServerSSLPort {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults integerForKey:YM_IM_SERVER_SSLPORT];
}

/**
 *  è®¾ç½®IM Server SSLç«¯å£
 *
 *  @param serverPort IM Server SSLç«¯å£
 */
- (void)setIMServerSSLPort:(NSInteger)serverPort {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setInteger:serverPort forKey:YM_IM_SERVER_SSLPORT];
    [userDefaults synchronize];
}

/**
 *  IM Serveræ¯å¦å¼å¯SSL
 *
 *  @return IM Serveræ¯å¦å¼å¯SSL
 */
- (BOOL)isIMServerEnableSSL {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_IM_SERVER_ENABLESSL];
}

/**
 *  è®¾ç½®IM Serveræ¯å¦å¼å¯SSL
 *
 *  @param enable IM Serveræ¯å¦å¼å¯SSL
 */
- (void)setIMServerEnableSSL:(BOOL)enable {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:enable forKey:YM_IM_SERVER_ENABLESSL];
    [userDefaults synchronize];
}

/**
 *  IM RestServer
 *
 *  @return IM RestServer
 */
- (NSString *)getIMRestServer {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_IM_REST_SERVER];
}

/**
 *  è®¾ç½®IM RestServer
 *
 *  @param server IM RestServer
 */
- (void)setIMRestServer:(NSString *)server {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:server forKey:YM_IM_REST_SERVER];
    [userDefaults synchronize];
}

/**
 *  IM RestServeræ¯å¦https
 *
 *  @return IM RestServeræ¯å¦https
 */
- (BOOL)isIMRestServerHTTPS {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_IM_REST_SERVER_HTTPS];
}

/**
 *  è®¾ç½®IM RestServeræ¯å¦https
 *
 *  @param isHTTPS IM RestServeræ¯å¦https
 */
- (void)setIMRestServerHTTPS:(BOOL)isHTTPS {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:isHTTPS forKey:YM_IM_REST_SERVER_HTTPS];
    [userDefaults synchronize];
}

/**
 *  IM RestResourceServeræ¯å¦https
 *
 *  @return IM RestResourceServeræ¯å¦https
 */
- (BOOL)isIMRestResourceServerHTTPS {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_IM_REST_RESOURCE_SERVER_HTTPS];
}

/**
 *  è®¾ç½®IM RestResourceServeræ¯å¦https
 *
 *  @param isHTTPS IM RestResourceServeræ¯å¦https
 */
- (void)setIMRestResourceServerHTTPS:(BOOL)isHTTPS {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:isHTTPS forKey:YM_IM_REST_RESOURCE_SERVER_HTTPS];
    [userDefaults synchronize];
}

- (NSString *)getIMRestServerScheme {
    return [self isIMRestServerHTTPS] ? @"https" : @"http";
}

- (NSString *)getIMRestResourceServerScheme {
    return [self isIMRestResourceServerHTTPS] ? @"https" : @"http";
}

#pragma mark -
#pragma mark Upload & Download

/**
 *  èµæºä¸ä¼ Server
 *
 *  @return èµæºä¸ä¼ Server
 */
- (NSString *)getResourceUploadServer {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults objectForKey:YM_RESOURCE_UPLOAD_SERVER];
}

/**
 *  è®¾ç½®èµæºä¸ä¼ Server
 *
 *  @param uploadServer èµæºä¸ä¼ Server
 */
- (void)setResourceUploadServer:(NSString *)uploadServer {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:uploadServer forKey:YM_RESOURCE_UPLOAD_SERVER];
    [userDefaults synchronize];
}

/**
 *  èµæºä¸è½½Server
 *
 *  @return èµæºä¸è½½Server
 */
- (NSString *)getResourceDownloadServer {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults objectForKey:YM_RESOURCE_DOWNLOAD_SERVER];
}

/**
 *  è®¾ç½®èµæºä¸è½½Server
 *
 *  @param downloadServer èµæºä¸è½½Server
 */
- (void)setResourceDownloadServer:(NSString *)downloadServer {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:downloadServer forKey:YM_RESOURCE_DOWNLOAD_SERVER];
    [userDefaults synchronize];
}

/**
 *  èµæºä¸ä¼ Servlet
 *
 *  @return Resource Upload Servlet
 */
- (NSString *)getResourceUploadServlet {
    NSString *servlet = DEFAULT_RESOURCE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestResourceServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getResourceUploadServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByAppendingString:@"/upload"];
    return servlet;
}

/**
 *  èµæºä¸è½½Servlet
 *
 *  @return Resource Download Servlet
 */
- (NSString *)getResourceDownloadServlet {
    NSString *servlet = DEFAULT_RESOURCE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestResourceServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getResourceDownloadServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByAppendingString:@"/download"];
    return servlet;
}

#pragma mark -
#pragma mark Current State

/**
 *  å½åç¨æ·ID
 *
 *  @return å½åç¨æ·ID
 */
- (NSString *)getUser {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_LAST_ACCOUNT];
}

/**
 *  å½åç¨æ·å®æ´IDï¼userID.appKey.etpKeyï¼
 *
 *  @return å½åç¨æ·å®æ´ID
 */
- (NSString *)getFullUser {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        return @"";
    }
    if ([self isAnonymous]) {
        return [NSString stringWithFormat:@"%@@%@/ANONYMOUS", user, [[YYIMConfig sharedInstance] getIMServerName]];
    }
    return [NSString stringWithFormat:@"%@.%@.%@", user, [self getAppKey], [self getEtpKey]];
}

/**
 *  å½åç¨æ·å®æ´IDï¼userID.appKey.etpKeyï¼
 *  å¿åç¨æ·ï¼anonymous.appKey.etpKeyï¼
 *
 *  @return å½åç¨æ·å®æ´ID
 */
- (NSString *)getFullUserAnonymousSpecialy {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        return @"";
    }
    if ([self isAnonymous]) {
        return [NSString stringWithFormat:@"anonymous.%@.%@", [self getAppKey], [self getEtpKey]];
    }
    return [NSString stringWithFormat:@"%@.%@.%@", user, [self getAppKey], [self getEtpKey]];
}

/**
 *  è®¾ç½®å½åç¨æ·ID
 *
 *  @param user å½åç¨æ·ID
 */
- (void)setUser:(NSString *)user {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:user forKey:YM_LAST_ACCOUNT];
    [userDefaults synchronize];
}

/**
 *  å½åç¨æ·JID
 *
 *  @return å½åç¨æ·JID
 */
- (NSString *)getJid {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_LAST_JID];
}

/**
 *  è®¾ç½®å½åç¨æ·JID
 *
 *  @param jid å½åç¨æ·JID
 */
- (void)setJid:(NSString *)jid {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:jid forKey:YM_LAST_JID];
    [userDefaults synchronize];
}

/**
 *  å½åæ¯å¦å¿åç¨æ·
 *
 *  @return å½åæ¯å¦å¿åç¨æ·
 */
- (BOOL)isAnonymous {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_ANONYMOUS];
}

/**
 *  è®¾ç½®å½åæ¯å¦å¿åç¨æ·
 *
 *  @param anonymous è®¾ç½®å½åæ¯å¦å¿åç¨æ·
 */
- (void)setAnonymous:(BOOL)anonymous {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:anonymous forKey:YM_ANONYMOUS];
    [userDefaults synchronize];
}

/**
 *  è®¾ç½®å½åDeviceToken
 *
 *  @return å½åDeviceToken
 */
- (NSString *)getDeviceToken {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_DEVICE_TOKEN];
}

/**
 *  è®¾ç½®å½åDeviceToken
 *
 *  @param deviceToken å½åDeviceToken
 */
- (void)setDeviceToken:(NSString *)deviceToken {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    if (deviceToken) {
        [userDefaults setObject:deviceToken forKey:YM_DEVICE_TOKEN];
    } else {
        [userDefaults removeObjectForKey:YM_DEVICE_TOKEN];
    }
    [userDefaults synchronize];
}

/**
 *  å½åIM Token
 *
 *  @return å½åIM Token
 */
- (NSString *)getToken {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_TOKEN];
}

/**
 *  è®¾ç½®å½åIM Token
 *
 *  @param token å½åIM Token
 */
- (void)setToken:(NSString *)token {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:token forKey:YM_TOKEN];
    [userDefaults synchronize];
}

/**
 *  å½åIM Tokenè¿ææ¶é´
 *
 *  @return å½åIM Tokenè¿ææ¶é´
 */
- (NSTimeInterval)getTokenExpiration {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults doubleForKey:YM_TOKEN_EXPIRATION];
}

/**
 *  è®¾ç½®å½åIM Tokenè¿ææ¶é´
 *
 *  @param expiration å½åIM Tokenè¿ææ¶é´
 */
- (void)setTokenExpiration:(NSTimeInterval)expiration {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    if (expiration > 0) {
        [userDefaults setDouble:expiration forKey:YM_TOKEN_EXPIRATION];
    } else {
        [userDefaults removeObjectForKey:YM_TOKEN_EXPIRATION];
    }
    [userDefaults synchronize];
}

/**
 *  å½åç¨æ·æ¯å¦äºçç®¡çå
 *
 *  @return å½åç¨æ·æ¯å¦äºçç®¡çå
 */
- (BOOL)isPanAdmin {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSDictionary *dic = [userDefaults dictionaryForKey:YM_PAN_ADMIN];
    NSNumber *number = [dic objectForKey:[[YYIMConfig sharedInstance] getFullUser]];
    if (!number) {
        return NO;
    }
    return [number boolValue];
}

/**
 *  å½åç¨æ·æ¯å¦äºçç®¡çå
 *
 *  @param isAdmin å½åç¨æ·æ¯å¦äºçç®¡çå
 */
- (void)setPanAdmin:(BOOL)isAdmin {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *dic = [NSMutableDictionary dictionaryWithDictionary:[userDefaults dictionaryForKey:YM_PAN_ADMIN]];
    if (!dic) {
        dic = [NSMutableDictionary dictionary];
    }
    [dic setObject:[NSNumber numberWithBool:isAdmin] forKey:[[YYIMConfig sharedInstance] getFullUser]];
    [userDefaults setObject:dic forKey:YM_PAN_ADMIN];
    [userDefaults synchronize];
}

#pragma mark -
#pragma mark Settings

/**
 *  æ¯å¦èªå¨ç»å½
 *
 *  @return æ¯å¦èªå¨ç»å½
 */
- (BOOL)isAutoLogin {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_IS_AUTO_LOGIN];
}

/**
 *  è®¾ç½®æ¯å¦èªå¨ç»å½
 *
 *  @param isAutoLogin æ¯å¦èªå¨ç»å½
 *  é»è®¤æ¸ç©ºå½åç¨æ·ç»å½ä¿¡æ¯
 */
- (void)setAutoLogin:(BOOL)isAutoLogin {
    [self setAutoLogin:isAutoLogin flag:YES];
}

/**
 *  è®¾ç½®æ¯å¦èªå¨ç»å½
 *
 *  @param isAutoLogin   æ¯å¦èªå¨ç»å½
 *  @param clearUserInfo æ¸ç©ºå½åç¨æ·ç»å½ä¿¡æ¯
 */
- (void)setAutoLogin:(BOOL)isAutoLogin flag:(BOOL)clearUserInfo {
    if (!isAutoLogin && clearUserInfo) {
        [self setUser:nil];
        [self setJid:nil];
        [self setToken:nil];
        [self setTokenExpiration:0];
    }
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:isAutoLogin forKey:YM_IS_AUTO_LOGIN];
    [userDefaults synchronize];
}

/**
 *  iOSæ¨éè¯ä¹¦åç§°
 *
 *  @return iOSæ¨éè¯ä¹¦åç§°
 */
- (NSString *)getApnsCerName {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_APNS_CER_NAME];
}

/**
 *  è®¾ç½®iOSæ¨éè¯ä¹¦åç§°
 *
 *  @param apnsCerName iOSæ¨éè¯ä¹¦åç§°
 */
- (void)setApnsCerName:(NSString *)apnsCerName {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:apnsCerName forKey:YM_APNS_CER_NAME];
    [userDefaults synchronize];
}

/**
 *  æ¯å¦èªå¨åæå¥½åéè¯·
 *
 *  @return æ¯å¦èªå¨åæå¥½åéè¯·
 */
- (BOOL)isAutoAcceptRosterInvite {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_AUTO_ACCEPT_ROSTER_INVITE];
}

/**
 *  æ¯å¦èªå¨åæå¥½åéè¯·
 *
 *  @param isAutoAccept æ¯å¦èªå¨åæå¥½åéè¯·
 */
- (void)setAutoAcceptRosterInvite:(BOOL)isAutoAccept {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:isAutoAccept forKey:YM_AUTO_ACCEPT_ROSTER_INVITE];
    [userDefaults synchronize];
}

/**
 *  ç¨æ·è®¾ç½®
 *
 *  @return ç¨æ·è®¾ç½®
 */
- (YYSettings *)getSettings {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    BOOL isSettingsInit = [userDefaults boolForKey:YM_SETTINGS_INIT];
    YYSettings *settings;
    if (!isSettingsInit) {
        settings = [YYSettings defaultSettings];
        [self setSettings:settings];
    } else {
        settings = [[YYSettings alloc] init];
        [settings setNewMsgRemind:[userDefaults boolForKey:YM_SETTINGS_NEWMSG_REMIND]];
        [settings setPlaySound:[userDefaults boolForKey:YM_SETTINGS_PLAY_SOUND]];
        [settings setPlayVibrate:[userDefaults boolForKey:YM_SETTINGS_PLAY_VIBRATE]];
        [settings setShowDetail:[userDefaults boolForKey:YM_SETTINGS_SHOW_DETAIL]];
    }
    return settings;
}

/**
 *  ç¨æ·è®¾ç½®
 *
 *  @param settings ç¨æ·è®¾ç½®
 */
- (void)setSettings:(YYSettings *)settings {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:[settings newMsgRemind] forKey:YM_SETTINGS_NEWMSG_REMIND];
    [userDefaults setBool:[settings playSound] forKey:YM_SETTINGS_PLAY_SOUND];
    [userDefaults setBool:[settings playVibrate] forKey:YM_SETTINGS_PLAY_VIBRATE];
    [userDefaults setBool:[settings showDetail] forKey:YM_SETTINGS_SHOW_DETAIL];
    [userDefaults setBool:YES forKey:YM_SETTINGS_INIT];
    [userDefaults synchronize];
}

/**
 *  å½åç¨æ·æ¶æ¯çæ¬å·
 *
 *  @return å½åæ¶æ¯çæ¬å·
 */
- (NSInteger)getMessageVersionNumber {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSDictionary *dic = [userDefaults dictionaryForKey:YM_MESSAGE_VERSION_NUMBER];
    NSNumber *versionNumber = [dic objectForKey:[[YYIMConfig sharedInstance] getFullUser]];
    return [versionNumber integerValue];
}

/**
 *  è®¾ç½®å½åç¨æ·æ¶æ¯çæ¬å·
 *
 *  @param versionNumber å½åæ¶æ¯çæ¬å·
 */
- (void)setMessageVersionNumber:(NSInteger)versionNumber {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *dic = [NSMutableDictionary dictionaryWithDictionary:[userDefaults dictionaryForKey:YM_MESSAGE_VERSION_NUMBER]];
    if (!dic) {
        dic = [NSMutableDictionary dictionary];
    }
    [dic setObject:[NSNumber numberWithInteger:versionNumber] forKey:[[YYIMConfig sharedInstance] getFullUser]];
    [userDefaults setObject:dic forKey:YM_MESSAGE_VERSION_NUMBER];
    [userDefaults synchronize];
}

/**
 *  æ¸ç©ºæ¶æ¯çæ¬å·
 */
- (void)clearMessageVersionNumbers {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults removeObjectForKey:YM_MESSAGE_VERSION_NUMBER];
    [userDefaults synchronize];
}

/**
 *  ç¾¤ç»çæ¬å·
 *
 *  @return ç¾¤ç»çæ¬å·
 */
- (NSNumber *)getChatGroupVersionNumber {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSDictionary *dic = [userDefaults dictionaryForKey:YM_CHATGROUP_VERSION_NUMBER];
    NSNumber *versionNumber = [dic objectForKey:[[YYIMConfig sharedInstance] getFullUser]];
    if (!versionNumber) {
        versionNumber = [NSNumber numberWithLongLong:0];
    }
    return versionNumber;
}

/**
 *  è®¾ç½®ç¾¤ç»çæ¬å·
 *
 *  @param versionNumber ç¾¤ç»çæ¬å·
 */
- (void)setChatGroupVersionNumber:(NSNumber *)versionNumber {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *dic = [NSMutableDictionary dictionaryWithDictionary:[userDefaults dictionaryForKey:YM_CHATGROUP_VERSION_NUMBER]];
    if (!dic) {
        dic = [NSMutableDictionary dictionary];
    }
    [dic setObject:versionNumber forKey:[[YYIMConfig sharedInstance] getFullUser]];
    [userDefaults setObject:dic forKey:YM_CHATGROUP_VERSION_NUMBER];
    [userDefaults synchronize];
}

/**
 *  æ¸ç©ºç¾¤ç»çæ¬å·
 */
- (void)clearChatGroupVersionNumbers {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults removeObjectForKey:YM_CHATGROUP_VERSION_NUMBER];
    [userDefaults synchronize];
}

/**
 *  ç¨æ·ä¿¡æ¯æ¾ç¤ºè®¾ç½®
 *
 *  @return ç¨æ·ä¿¡æ¯æ¾ç¤ºè®¾ç½®
 */
- (NSArray *)getUserSetting {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSString *key = [NSString stringWithFormat:@"%@_%@.%@", YM_VCARD_SETTING, [[YYIMConfig sharedInstance] getAppKey], [[YYIMConfig sharedInstance] getEtpKey]];
    return [userDefaults objectForKey:key];
}

/**
 *  ç¨æ·ä¿¡æ¯æ¾ç¤ºè®¾ç½®
 *
 *  @param userSetting ç¨æ·ä¿¡æ¯æ¾ç¤ºè®¾ç½®
 */
- (void)setUserSetting:(NSArray *)userSetting {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSString *key = [NSString stringWithFormat:@"%@_%@.%@", YM_VCARD_SETTING, [[YYIMConfig sharedInstance] getAppKey], [[YYIMConfig sharedInstance] getEtpKey]];
    [userDefaults setObject:userSetting forKey:key];
    [userDefaults synchronize];
}

/**
 *  å¥½åæ¨¡å¼æ¯å¦ä¸ºæ¶è
 *
 *  @return å¥½åæ¨¡å¼æ¯å¦ä¸ºæ¶è
 */
- (BOOL)isRosterCollect {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_IS_ROSTER_COLLECT];
}

/**
 *  è®¾ç½®å¥½åæ¨¡å¼
 *
 *  @param isCollect æ¯å¦æ¶è
 */
- (void)setRosterCollect:(BOOL)isCollect {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:isCollect forKey:YM_IS_ROSTER_COLLECT];
    [userDefaults synchronize];
}

/**
 *  ç¾¤ç»æ¨¡å¼æ¯å¦ä¸ºå¢é
 *
 *  @return ç¾¤ç»æ¨¡å¼æ¯å¦ä¸ºå¢é
 */
- (BOOL)isChatGroupVersion {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_IS_CHATGROUP_VERSION];
}

/**
 *  è®¾ç½®ç¾¤ç»æ¨¡å¼
 *
 *  @param isVersion æ¯å¦å¢é
 */
- (void)setChatGroupVersion:(BOOL)isVersion {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:isVersion forKey:YM_IS_CHATGROUP_VERSION];
    [userDefaults synchronize];
}

/**
 *  æ¯å¦å¼ºå¶åæ­¥åç«¯æ¶æ¯
 *
 *  @return æ¯å¦å¼ºå¶åæ­¥åç«¯æ¶æ¯
 */
- (BOOL)isForceMessageSync {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults boolForKey:YM_IS_FORCE_MESSAGE_SYNC];
}

/**
 *  è®¾ç½®æ¯å¦å¼ºå¶åæ­¥åç«¯æ¶æ¯
 *
 *  @param isForce æ¯å¦å¼ºå¶åæ­¥åç«¯æ¶æ¯
 */
- (void)setForceMessageSync:(BOOL)isForce {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:isForce forKey:YM_IS_FORCE_MESSAGE_SYNC];
    [userDefaults synchronize];
}

#pragma mark -
#pragma mark REST -

#pragma mark DeviceToken

/**
 *  iOS DeviceToken Servlet
 *
 *  @return iOS DeviceToken Servlet
 */
- (NSString *)getDeviceTokenServlet {
    NSString *servlet = DEFAULT_DEVICETOKEN_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    return servlet;
}

/**
 *  Password Servlet
 *
 *  @return Password Servlet
 */
- (NSString *)getPasswordServlet {
    if ([YYIMStringUtility isEmpty:[self getUser]]) {
        YYIMLogError(@"unexpected empty user when getPasswordServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_PASSWORD_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{username}" withString:[self getUser]];
    return servlet;
}

/**
 *  æµè¯ç¨TokenServlet
 *
 *  @return æµè¯ç¨TokenServlet
 */
- (NSString *)getDemoTokenServlet {
    NSString *servlet = DEFAULT_DEMO_TOKEN_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    return servlet;
}

/**
 *  æ¶æ¯çæ¬å·Servlet
 *
 *  @param subpath å­è·¯å¾
 *
 *  @return æ¶æ¯çæ¬å·Servlet
 */
- (NSString *)getVersionServlet:(NSString *)subpath {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getVersionServlet:%@", subpath);
        return nil;
    }
    
    NSString *servlet = DEFAULT_VERSION_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{username}" withString:user];
    if (subpath.length > 0) {
        servlet = [servlet stringByAppendingString:@"/"];
        servlet = [servlet stringByAppendingString:subpath];
    }
    return servlet;
}

/**
 *  ç¾¤ç»æ¶æ¯çæ¬å·Servlet
 *
 *  @return ç¾¤ç»æ¶æ¯çæ¬å·Servlet
 */
- (NSString *)getMUCVersionServlet {
    NSString *servlet = DEFAULT_MUC_VERSION_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    return servlet;
}

#pragma mark Tele Conference

/**
 *  ååAccountIdentify
 *
 *  @return ååAccountIdentify
 */
- (NSString *)getDuduAccountIdentify {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_DUDU_ACCOUNTIDENTIFY];
}

/**
 *  è®¾ç½®ååAccountIdentify
 *
 *  @param accountIdentify ååAccountIdentify
 */
- (void)setDuduAccountIdentify:(NSString *)accountIdentify {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:accountIdentify forKey:YM_DUDU_ACCOUNTIDENTIFY];
    [userDefaults synchronize];
}

/**
 *  ååAppkeytemp
 *
 *  @return ååAppkeytemp
 */
- (NSString *)getDuduAppkeytemp {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    return [userDefaults stringForKey:YM_DUDU_APPKEYTEMP];
}

/**
 *  è®¾ç½®ååAppkeytemp
 *
 *  @param appkeytemp ååAppkeytemp
 */
- (void)setDuduAppkeytemp:(NSString *)appkeytemp {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:appkeytemp forKey:YM_DUDU_APPKEYTEMP];
    [userDefaults synchronize];
}

/**
 *  åååå»ºä¼è®®Servlet
 *
 *  @return åååå»ºä¼è®®Servlet
 */
- (NSString *)getDuduCreateConferenceServlet {
    return DEFAULT_DUDU_CREATE_CONFERENCE;
}

/**
 *  çµè¯ä¼è®®æ¥å£
 *
 *  @return çµè¯ä¼è®®æ¥å£
 */
- (NSString *)getTeleConfereneServlet {
    NSString *servlet = DEFAULT_TELECONFERENCE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    return servlet;
}

#pragma mark MUC QRCode

/**
 *  ç¾¤ç»äºç»´ç çæServlet
 *
 *  @return ç¾¤ç»äºç»´ç çæServlet
 */
- (NSString *)getMucQrCodeServlet {
    NSString *servlet = DEFAULT_MUCQRCODE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    return servlet;
}

/**
 *  ç¾¤ç»äºç»´ç è¯¦æServlet
 *
 *  @return ç¾¤ç»äºç»´ç è¯¦æServlet
 */
- (NSString *)getMucQrCodeInfoServlet {
    NSString *servlet = DEFAULT_MUCQRCODE_INFO_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    return servlet;
}

#pragma mark Net Meeting

/**
 *  è§é¢ä¼è®®å¨æKeyServlet
 *
 *  @return è§é¢ä¼è®®å¨æKeyServlet
 */
- (NSString *)getNetMeetingKeyServlet {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getNetMeetingKeyServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_NETMEETING_KEY_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    return servlet;
}

/**
 *  è§é¢ä¼è®®Servlet
 *
 *  @return è§é¢ä¼è®®Servlet
 */
- (NSString *)getNetMeetingInfoServlet {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getNetMeetingInfoServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_NETMEETING_INFO_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    return servlet;
}

/**
 *  è§é¢ä¼è®®è¯¦æServlet
 *
 *  @param channelId è§é¢ä¼è®®é¢éID
 *
 *  @return è§é¢ä¼è®®è¯¦æServlet
 */
- (NSString *)getNetMeetingDetailServlet:(NSString *)channelId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getNetMeetingInfoServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_NETMEETING_DETAIL_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{channelId}" withString:channelId];
    return servlet;
}

/**
 *  è§é¢ä¼è®®é¢çº¦Servlet
 *
 *  @return è§é¢ä¼è®®é¢çº¦Servlet
 */
- (NSString *)getNetMeetingReservationServlet {
    NSString *servlet = DEFAULT_NETMEETING_RESERVATION_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    return servlet;
}

/**
 *  è§é¢ä¼è®®å é¤Servlet
 *
 *  @param channelId è§é¢ä¼è®®é¢éID
 *
 *  @return è§é¢ä¼è®®å é¤Servlet
 */
- (NSString *)getNetMeetingRemoveServlet:(NSString *)channelId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getNetMeetingRemoveServlet:%@", channelId);
        return nil;
    }
    
    NSString *servlet = DEFAULT_NETMEETING_REMOVE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{channelId}" withString:channelId];
    return servlet;
}

/**
 *  è§é¢ä¼è®®åæ¶é¢çº¦Servlet
 *
 *  @param channelId è§é¢ä¼è®®é¢éID
 *
 *  @return è§é¢ä¼è®®åæ¶é¢çº¦Servlet
 */
- (NSString *)getNetMeetingCancelReservationServlet:(NSString *)channelId {
    NSString *servlet = DEFAULT_NETMEETING_CANCEL_RESERVATION_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{channelId}" withString:channelId];
    return servlet;
}

/**
 *  è§é¢ä¼è®®é¢çº¦éè¯·Servlet
 *
 *  @return è§é¢ä¼è®®é¢çº¦éè¯·Servlet
 */
- (NSString *)getNetMeetingReservationInviteServlet {
    NSString *servlet = DEFAULT_NETMEETING_RESERVATION_INVITE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    return servlet;
}

/**
 *  è§é¢ä¼è®®é¢çº¦è¸¢äººServlet
 *
 *  @param channelId è§é¢ä¼è®®é¢éID
 *
 *  @return è§é¢ä¼è®®é¢çº¦è¸¢äººServlet
 */
- (NSString *)getNetMeetingReservationKickServlet:(NSString *)channelId {
    NSString *servlet = DEFAULT_NETMEETING_RESERVATION_KICK_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{channelId}" withString:channelId];
    return servlet;
}

#pragma mark Message Revoke

/**
 *  ç¾¤ç»æ¶æ¯æ¤å
 *
 *  @param packetId æ¶æ¯ID
 *
 *  @return ç¾¤ç»æ¶æ¯æ¤å
 */
- (NSString *)getGroupMessageRevokeServlet:(NSString *)packetId {
    NSString *servlet = DEFAULT_GROUP_MESSAGE_REVOKE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{packetId}" withString:packetId];
    return servlet;
}

/**
 *  ä¸ªäººæ¶æ¯æ¤å
 *
 *  @param packetId æ¶æ¯ID
 *
 *  @return ä¸ªäººæ¶æ¯æ¤å
 */
- (NSString *)getPersonalMessageRevokeServlet:(NSString *)packetId {
    NSString *servlet = DEFAULT_PERSONAL_MESSAGE_REVOKE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{packetId}" withString:packetId];
    return servlet;
}

#pragma mark Group Member

/**
 *  è·åç¾¤ç»æåçåè¡¨Servlet
 *
 *  @param groupId ç¾¤ç»ID
 *
 *  @return è·åç¾¤ç»æåçåè¡¨Servlet
 */
- (NSString *)getChatGroupMembersServlet:(NSString *)groupId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getChatGroupMembersServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_CHATGROUP_MEMBER_LIST_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{roomId}" withString:groupId];
    return servlet;
}

#pragma mark Message File

/**
 *  åèæä»¶åè¡¨Servlet
 *
 *  @param chatId ç¨æ·ID
 *
 *  @return åèæä»¶åè¡¨Servlet
 */
- (NSString *)getMessageFileChatListServlet:(NSString *)chatId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getMessageFileChatListServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_MESSAGE_FILE_CHAT_LIST_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{chatId}" withString:chatId];
    return servlet;
}

/**
 *  åèæä»¶æç´¢Servlet
 *
 *  @param chatId ç¨æ·ID
 *
 *  @return åèæä»¶æç´¢Servlet
 */
- (NSString *)getMessageFileChatSearchServlet:(NSString *)chatId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getMessageFileChatSearchServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_MESSAGE_FILE_CHAT_SEARCH_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{chatId}" withString:chatId];
    return servlet;
}

/**
 *  ç¾¤èæä»¶åè¡¨Servlet
 *
 *  @param groupId ç¾¤ç»ID
 *
 *  @return ç¾¤èæä»¶åè¡¨Servlet
 */
- (NSString *)getMessageFileChatGroupListServlet:(NSString *)groupId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getMessageFileChatGroupListServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_MESSAGE_FILE_CHATGROUP_LIST_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{roomId}" withString:groupId];
    return servlet;
}

/**
 *  ç¾¤èæä»¶æç´¢Servlet
 *
 *  @param groupId ç¾¤ç»ID
 *
 *  @return ç¾¤èæä»¶åè¡¨Servlet
 */
- (NSString *)getMessageFileChatGroupSearchServlet:(NSString *)groupId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getMessageFileChatGroupSearchServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_MESSAGE_FILE_CHATGROUP_SEARCH_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{roomId}" withString:groupId];
    return servlet;
}

#pragma mark PubAccount Menu

/**
 *  è·åå¬å±å·èå
 *
 *  @param accountId å¬å±å·ID
 *
 *  @return è·åå¬å±å·èå
 */
- (NSString *)getPubAccountMenuServlet:(NSString *)accountId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getPubAccountMenuServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_PUBACCOUNT_MENU_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{pubId}" withString:accountId];
    return servlet;
}

/**
 *  è·åå¬å±å·æ¨éå½ä»¤çèå
 *
 *  @param accountId å¬å±å·ID
 *
 *  @return è·åå¬å±å·æ¨éå½ä»¤çèå
 */
- (NSString *)getPubAccountMenuCommandServlet:(NSString *)accountId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getPubAccountMenuCommandServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_PUBACCOUNT_MENU_COMMAND_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{pubId}" withString:accountId];
    return servlet;
}

#pragma mark UserTag & RosterTag

/**
 *  è®¾ç½®ç¨æ·çtag
 *
 *  @return è®¾ç½®ç¨æ·çtag
 */
- (NSString *)getUserTagAddServlet {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getUserTagAddServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_USER_TAG_ADD_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    return servlet;
}

/**
 *  å é¤ç¨æ·çtag
 *
 *  @return å é¤ç¨æ·çtag
 */
- (NSString *)getUserTagDeleteServlet {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getUserTagAddServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_USER_TAG_DELETE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    return servlet;
}

/**
 *  è®¾ç½®å¥½åçtag
 *
 *  @param rosterId å¥½åID
 *
 *  @return è®¾ç½®å¥½åçtag
 */
- (NSString *)getRosterTagAddServlet:(NSString *)rosterId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getUserTagAddServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_ROSTER_TAG_ADD_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{rosterId}" withString:rosterId];
    return servlet;
}

/**
 *  å é¤å¥½åçtag
 *
 *  @param rosterId å¥½åID
 *
 *  @return å é¤å¥½åçtag
 */
- (NSString *)getRosterTagDeleteServlet:(NSString *)rosterId {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getUserTagAddServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_ROSTER_TAG_DELETE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{rosterId}" withString:rosterId];
    return servlet;
}

#pragma mark UserProfile

/**
 *  ç¨æ·è®¾ç½®æ¥å£
 *
 *  @return ç¨æ·è®¾ç½®æ¥å£
 */
- (NSString *)getUserProfileServlet {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getUserTagAddServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_USER_PROFILE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    return servlet;
}

/**
 *  ç¨æ·è®¾ç½®åææ°æ¥å£
 *
 *  @return ç¨æ·è®¾ç½®åææ°æ¥å£
 */
- (NSString *)getUserProfileMuteServlet {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getUserTagAddServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_USER_PROFILE_MUTE_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    return servlet;
}

/**
 *  ç¨æ·è®¾ç½®ç½®é¡¶æ¥å£
 *
 *  @return ç¨æ·è®¾ç½®ç½®é¡¶æ¥å£
 */
- (NSString *)getUserProfileStickServlet {
    NSString *user = [self getUser];
    if ([YYIMStringUtility isEmpty:user]) {
        YYIMLogError(@"unexpected empty user when getUserTagAddServlet");
        return nil;
    }
    
    NSString *servlet = DEFAULT_USER_PROFILE_STICK_SERVLET;
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{scheme}" withString:[self getIMRestServerScheme]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{restServer}" withString:[self getIMRestServer]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{etpId}" withString:[self getEtpKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{appId}" withString:[self getAppKey]];
    servlet = [servlet stringByReplacingOccurrencesOfString:@"{userId}" withString:user];
    return servlet;
}

@end
